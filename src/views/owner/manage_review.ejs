<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="h2">
    <i class="fas fa-star text-warning me-2"></i>
    Đánh giá địa điểm của tôi
  </h1>
  <a href="/owner/dashboard" class="btn btn-outline-secondary">
    <i class="fas fa-arrow-left me-1"></i>Quay lại Dashboard
  </a>
</div>

<div class="card">
  <div class="card-header">
    <h5 class="mb-0">
      <i class="fas fa-list me-2"></i>
      Danh sách Đánh giá (<%= reviews ? reviews.length : 0 %>)
    </h5>
  </div>
  <div class="card-body">
    <% if (reviews && reviews.length > 0) { %>
      <div class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Địa điểm</th>
              <th>Người đánh giá</th>
              <th>Đánh giá</th>
              <th>Nhận xét</th>
              <th>Ngày tạo</th>
              <th>Thao tác</th>
            </tr>
          </thead>
          <tbody>
            <% reviews.forEach(review => { %>
              <tr>
                <td><strong><%= review.location?.name || 'Đã xóa' %></strong></td>
                <td>
                  <% if (review.user) { %>
                    <div>
                      <strong><%= review.user.username %></strong>
                      <br>
                      <small class="text-muted"><%= review.user.email %></small>
                    </div>
                  <% } else { %>
                    <span class="text-muted">Người dùng đã bị xóa</span>
                  <% } %>
                </td>
                <td>
                  <div class="rating">
                    <% for (let i = 1; i <= 5; i++) { %>
                      <i class="fas fa-star <%= i <= review.rating ? 'text-warning' : 'text-muted' %>"></i>
                    <% } %>
                    <span class="ms-1">(<%= review.rating %>/5)</span>
                  </div>
                </td>
                <td>
                  <% if (review.comment) { %>
                    <p class="mb-0">
                      <%= review.comment.substring(0, 80) %><%= review.comment.length > 80 ? '...' : '' %>
                    </p>
                  <% } else { %>
                    <span class="text-muted">Không có nhận xét</span>
                  <% } %>
                </td>
                <td>
                  <small class="text-muted"><%= new Date(review.createdAt).toLocaleDateString('vi-VN') %></small>
                </td>
                <td>
                  <a href="/owner/reviews/<%= review._id %>" class="btn btn-sm btn-outline-primary">
                    <i class="fas fa-eye"></i> Chi tiết
                  </a>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    <% } else { %>
      <div class="text-center py-5">
        <i class="fas fa-star fa-3x text-muted mb-3"></i>
        <h4 class="text-muted">Chưa có đánh giá nào</h4>
      </div>
    <% } %>
  </div>
</div>
